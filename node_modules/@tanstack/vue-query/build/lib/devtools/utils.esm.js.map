{"version":3,"file":"utils.esm.js","sources":["../../../src/devtools/utils.ts"],"sourcesContent":["/* istanbul ignore file */\n\nimport type { Query } from '@tanstack/query-core'\n\ntype SortFn = (a: Query, b: Query) => number\n\n// eslint-disable-next-line no-shadow\nenum QueryState {\n  Fetching = 0,\n  Fresh,\n  Stale,\n  Inactive,\n  Paused,\n}\n\nexport function getQueryState(query: Query): QueryState {\n  if (query.state.fetchStatus === 'fetching') {\n    return QueryState.Fetching\n  }\n  if (query.state.fetchStatus === 'paused') {\n    return QueryState.Paused\n  }\n  if (!query.getObserversCount()) {\n    return QueryState.Inactive\n  }\n  if (query.isStale()) {\n    return QueryState.Stale\n  }\n\n  return QueryState.Fresh\n}\n\nexport function getQueryStateLabel(query: Query): string {\n  const queryState = getQueryState(query)\n\n  if (queryState === QueryState.Fetching) {\n    return 'fetching'\n  }\n  if (queryState === QueryState.Paused) {\n    return 'paused'\n  }\n  if (queryState === QueryState.Stale) {\n    return 'stale'\n  }\n  if (queryState === QueryState.Inactive) {\n    return 'inactive'\n  }\n\n  return 'fresh'\n}\n\nexport function getQueryStatusFg(query: Query): number {\n  const queryState = getQueryState(query)\n\n  if (queryState === QueryState.Stale) {\n    return 0x000000\n  }\n\n  return 0xffffff\n}\n\nexport function getQueryStatusBg(query: Query): number {\n  const queryState = getQueryState(query)\n\n  if (queryState === QueryState.Fetching) {\n    return 0x006bff\n  }\n  if (queryState === QueryState.Paused) {\n    return 0x8c49eb\n  }\n  if (queryState === QueryState.Stale) {\n    return 0xffb200\n  }\n  if (queryState === QueryState.Inactive) {\n    return 0x3f4e60\n  }\n\n  return 0x008327\n}\n\nconst queryHashSort: SortFn = (a, b) => a.queryHash.localeCompare(b.queryHash)\n\nconst dateSort: SortFn = (a, b) =>\n  a.state.dataUpdatedAt < b.state.dataUpdatedAt ? 1 : -1\n\nconst statusAndDateSort: SortFn = (a, b) => {\n  if (getQueryState(a) === getQueryState(b)) {\n    return dateSort(a, b)\n  }\n\n  return getQueryState(a) > getQueryState(b) ? 1 : -1\n}\n\nexport const sortFns: Record<string, SortFn> = {\n  'Status > Last Updated': statusAndDateSort,\n  'Query Hash': queryHashSort,\n  'Last Updated': dateSort,\n}\n"],"names":["QueryState","getQueryState","query","state","fetchStatus","Fetching","Paused","getObserversCount","Inactive","isStale","Stale","Fresh","getQueryStateLabel","queryState","getQueryStatusFg","getQueryStatusBg","queryHashSort","a","b","queryHash","localeCompare","dateSort","dataUpdatedAt","statusAndDateSort","sortFns"],"mappings":"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"}